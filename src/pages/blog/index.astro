---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Heading from '../../components/Heading.astro';
import Link from '../../components/Link.astro';
import type { CollectionEntry } from 'astro:content';

const posts = await getCollection('blog');
posts.sort((a: CollectionEntry<'blog'>, b: CollectionEntry<'blog'>) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="Blog | Why Not Astro?">
  <main class="space-y-8">
    <Heading level="h1" size="4xl">Blog</Heading>
    <div class="grid gap-8">
      {posts.map((post: CollectionEntry<'blog'>) => (
        <article class="space-y-2">
          <Heading level="h2" size="2xl">
            <Link href={`/blog/${post.slug}`}>{post.data.title}</Link>
          </Heading>
          <p class="text-sm">
            {post.data.pubDate.toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            })}
          </p>
          <p>{post.data.description}</p>
        </article>
      ))}
    </div>
  </main>
</BaseLayout> 